# Understanding AGENTS.md in Apify Templates

## What is AGENTS.md?

`AGENTS.md` is **official Apify documentation** included in Actor templates (generated by `apify create`). It provides AI agent-specific guidance for Actor development, maintained by Apify.

## Location

After running `apify create my-scraper`, you'll find:

```
my-scraper/
├── AGENTS.md          ← Official Apify AI agent guidance
├── .actor/
├── src/
└── ...
```

## Scope Division

### This Skill Provides: Strategy & Workflow

**When and why**:
- Phase 1: Interactive reconnaissance (Playwright MCP + DevTools)
- Phase 2: Strategy discovery (sitemaps, APIs)
- Phase 3: Strategy recommendation (which approach to use)
- Phase 4: Iterative implementation
- Phase 5: Actor productionization workflow

**Template selection**:
- Decision tree: Cheerio vs Playwright vs Camoufox
- When to use each template based on site characteristics
- Performance trade-offs

**Integration**:
- How to convert scraper to Actor
- When to productionize
- Deployment workflow

### AGENTS.md Provides: Implementation Details

**How to implement**:
- Do/Don't patterns for Actor code
- SDK usage best practices
- Concurrency settings (HTTP: 10-50, Browser: 1-5)
- Error handling patterns
- Safety and permission guidelines

**Schema specifications**:
- Input schema detailed structure and examples
- Output schema with template variables
- Dataset schema with views and transformations
- Key-value store schema with collections

**Apify-specific patterns**:
- When to use `Actor.getValue()` vs `Dataset.getData()`
- How to structure router patterns
- Retry strategies with exponential backoff
- Storage management patterns

## When to Reference AGENTS.md

### During Actor Development (Phase 5)

**After `apify create`**:
1. Read AGENTS.md for Do/Don't patterns
2. Use input schema examples from AGENTS.md
3. Reference output schema specifications
4. Follow SDK best practices

**While coding**:
- Check AGENTS.md for concurrency settings
- Verify proper error handling patterns
- Ensure proper dataset/key-value store usage

### What This Skill Already Covers

**Don't duplicate AGENTS.md for**:
- Basic CLI workflow (`apify create`, `apify run`, `apify push`) - covered in `cli-workflow.md`
- TypeScript recommendation - covered in `typescript-first.md`
- Template selection logic - covered in `productionization.md`

**Use AGENTS.md for**:
- Detailed schema examples beyond what's in `input-schemas.md`
- Dataset transformation and view configuration
- Key-value store collection patterns
- Advanced SDK usage patterns

## Key Content in AGENTS.md

### 1. Do/Don't Lists

**Aligned with this skill**:
- ✅ "use CheerioCrawler for static HTML (10x faster)" - matches our template selection
- ✅ "use PlaywrightCrawler only for JavaScript-heavy sites" - matches our decision tree
- ✅ "validate input early with proper error handling" - production best practice

**Adds value**:
- Concurrency settings: HTTP: 10-50, Browser: 1-5
- Retry strategies with exponential backoff
- Deprecated options to avoid (e.g., `requestHandlerTimeoutMillis` on CheerioCrawler v3.x)

### 2. Schema Specifications

**What we cover** (in `input-schemas.md`):
- Basic field types (string, number, boolean, array)
- Common patterns (startUrls, maxItems, proxy config)
- 6 complete examples

**What AGENTS.md adds**:
- Output schema structure and template variables
- Dataset schema with views, transformations, and display components
- Key-value store schema with collections and content type validation
- Complete examples with all properties

### 3. Safety and Permissions

**AGENTS.md provides**:
- Allowed without prompt: `Actor.getValue()`, `Dataset.pushData()`, `apify run`
- Ask first: npm installations, `apify push`, proxy changes, Dockerfile changes

**This skill assumes**:
- User controls deployment decisions
- Focus on workflow, not permission model

### 4. Resources and References

**AGENTS.md links**:
- Apify MCP tools (search-apify-docs, fetch-apify-docs)
- llms.txt and llms-full.txt
- Crawlee documentation
- Actor whitepaper

**This skill links**:
- Anthropic best practices
- Our own workflow documentation
- Apify CLI and platform docs

## Integration Workflow

### Recommended Approach

**Phase 1-4: Use this skill**
→ Reconnaissance, strategy, implementation, testing

**Phase 5: Combine both**
→ This skill for `apify create` workflow
→ AGENTS.md for implementation details

**Example**:
```
1. User: "Make this an Apify Actor"
2. Claude references: workflows/productionization.md (this skill)
3. Claude runs: apify create my-scraper
4. Claude notes: "Template includes AGENTS.md - reference for schema details"
5. User develops Actor
6. Claude references AGENTS.md for:
   - Input schema detailed examples
   - Dataset view configuration
   - SDK best practices
```

## Quick Reference: When to Use Which

| Task | Use This Skill | Use AGENTS.md |
|------|---------------|---------------|
| Decide to productionize | ✅ workflows/productionization.md | |
| Choose template (Cheerio/Playwright) | ✅ Decision tree | |
| Run `apify create` | ✅ cli-workflow.md | |
| Basic input schema | ✅ input-schemas.md | ✅ More examples |
| Output schema details | | ✅ Template variables |
| Dataset schema views | | ✅ Complete spec |
| Key-value store schema | | ✅ Collections |
| Do/Don't patterns | ✅ Anti-patterns | ✅ Apify-specific |
| Concurrency settings | | ✅ HTTP vs Browser |
| SDK usage patterns | | ✅ Actor.getValue() etc |
| Deployment workflow | ✅ deployment.md | |

## Best Practices

### ✅ DO:

- Reference AGENTS.md after `apify create` for implementation details
- Use this skill for strategy and workflow decisions
- Combine both: our workflow guidance + AGENTS.md implementation details
- Check AGENTS.md for Apify-specific patterns (concurrency, storage, SDK)
- Use AGENTS.md schema examples when configuring complex views

### ❌ DON'T:

- Duplicate AGENTS.md content in this skill (maintenance burden)
- Ignore AGENTS.md - it's official Apify guidance
- Reference AGENTS.md before `apify create` (it doesn't exist yet)
- Choose templates based on AGENTS.md (use our decision tree instead)

## Summary

**AGENTS.md and this skill are complementary**:

- **This skill**: Strategy, workflow, when/why (reconnaissance → Actor creation)
- **AGENTS.md**: Implementation, how, Apify-specific patterns (schemas, SDK, Do/Don't)

**Integration point**: After `apify create`, reference AGENTS.md for implementation details while using this skill for overall workflow and strategy.

**Result**: Best of both worlds - strategic workflow from this skill + official Apify implementation guidance from AGENTS.md.

---

Back to Apify module: `README.md`
